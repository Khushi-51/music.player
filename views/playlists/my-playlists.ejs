<div class="container mt-4">
  <div class="row mb-4">
    <div class="col-md-8">
      <h1>My Playlists</h1>
    </div>
    <div class="col-md-4 text-end">
      <a href="/playlists/create/new" class="btn btn-primary">Create New Playlist</a>
    </div>
  </div>

  <% if (playlists && playlists.length > 0) { %>
    <div class="row">
      <% playlists.forEach(playlist => { %>
        <div class="col-md-4 mb-4">
          <div class="card playlist-card">
            <div class="card-img-container">
              <img src="<%= playlist.coverImage %>" class="card-img-top playlist-cover" alt="<%= playlist.name %>">
              <div class="card-img-overlay">
                <span class="badge <%= playlist.isPublic ? 'bg-success' : 'bg-secondary' %>">
                  <%= playlist.isPublic ? 'Public' : 'Private' %>
                </span>
              </div>
            </div>
            <div class="card-body">
              <h5 class="card-title"><%= playlist.name %></h5>
              <p class="card-text"><%= playlist.description ? playlist.description.substring(0, 100) + (playlist.description.length > 100 ? '...' : '') : 'No description' %></p>
              <div class="d-flex justify-content-between">
                <a href="/playlists/<%= playlist._id %>" class="btn btn-playlist">View</a>
                <div class="btn-group">
                  <a href="/playlists/<%= playlist._id %>/edit" class="btn btn-outline-secondary btn-sm">Edit</a>
                  <form action="/playlists/<%= playlist._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure you want to delete this playlist?');">
                    <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                  </form>
                </div>
              </div>
            </div>
            <div class="card-footer text-muted">
              <small><%= playlist.songs.length %> songs</small>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  <% } else { %>
    <div class="alert alert-info">
      <p>You haven't created any playlists yet. <a href="/playlists/create/new">Create your first playlist</a>.</p>
    </div>
  <% } %>
</div>
