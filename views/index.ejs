<div class="container mt-4">
  <!-- Hero Section -->
  <div class="row align-items-center mb-5">
    <div class="col-md-6">
      <h1 class="display-4 fw-bold">Your Music, Anywhere</h1>
      <p class="lead">Discover, upload, and share your favorite music with friends. Create playlists and enjoy a seamless listening experience.</p>
      <div class="d-grid gap-2 d-md-flex justify-content-md-start">
        <a href="/songs" class="btn btn-primary btn-lg px-4 me-md-2">Explore Songs</a>
        <a href="/playlists" class="btn btn-outline-secondary btn-lg px-4">Browse Playlists</a>
      </div>
    </div>
    <div class="col-md-6">
      <img src="/uploads/images/default-cover.png" alt="Music Player" class="img-fluid rounded-3 shadow">
    </div>
  </div>

  <!-- Featured Songs Section -->
  <div class="row mb-5">
    <div class="col-12">
      <h2 class="border-bottom pb-2 mb-4">Featured Songs</h2>
    </div>
    
    <div class="col-12">
      <div class="row" id="featuredSongs">
        <div class="col-12 text-center">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Popular Playlists Section -->
  <div class="row mb-5">
    <div class="col-12">
      <h2 class="border-bottom pb-2 mb-4">Popular Playlists</h2>
    </div>
    
    <div class="col-12">
      <div class="row" id="popularPlaylists">
        <div class="col-12 text-center">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- How It Works Section -->
  <div class="row mb-5">
    <div class="col-12">
      <h2 class="text-center mb-4">How It Works</h2>
    </div>
    
    <div class="col-md-4 mb-4">
      <div class="card h-100 text-center">
        <div class="card-body">
          <i class="bi bi-cloud-upload fs-1 text-primary mb-3"></i>
          <h3 class="card-title">Upload</h3>
          <p class="card-text">Share your music with the world. Upload your songs in various formats.</p>
        </div>
      </div>
    </div>
    
    <div class="col-md-4 mb-4">
      <div class="card h-100 text-center">
        <div class="card-body">
          <i class="bi bi-collection-play fs-1 text-primary mb-3"></i>
          <h3 class="card-title">Create</h3>
          <p class="card-text">Build custom playlists with your favorite songs and share them with friends.</p>
        </div>
      </div>
    </div>
    
    <div class="col-md-4 mb-4">
      <div class="card h-100 text-center">
        <div class="card-body">
          <i class="bi bi-headphones fs-1 text-primary mb-3"></i>
          <h3 class="card-title">Listen</h3>
          <p class="card-text">Enjoy your music anywhere, anytime with our easy-to-use player.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Fetch featured songs
    fetch('/songs?limit=6')
      .then(response => response.json())
      .then(data => {
        const featuredSongsContainer = document.getElementById('featuredSongs');
        
        if (data.data && data.data.length > 0) {
          let html = '';
          
          data.data.forEach(song => {
            html += `
              <div class="col-md-4 mb-4">
                <div class="card song-card h-100">
                  <img src="${song.coverImage}" class="card-img-top song-cover" alt="${song.title}">
                  <div class="card-body">
                    <h5 class="card-title">${song.title}</h5>
                    <p class="card-text text-muted">${song.artist}</p>
                    <a href="/songs/${song._id}" class="btn btn-primary stretched-link">Listen</a>
                  </div>
                </div>
              </div>
            `;
          });
          
          featuredSongsContainer.innerHTML = html;
        } else {
          featuredSongsContainer.innerHTML = '<div class="col-12"><div class="alert alert-info">No songs available yet.</div></div>';
        }
      })
      .catch(error => {
        console.error('Error fetching songs:', error);
        document.getElementById('featuredSongs').innerHTML = '<div class="col-12"><div class="alert alert-danger">Failed to load songs.</div></div>';
      });
    
    // Fetch popular playlists
    fetch('/playlists?limit=3')
      .then(response => response.json())
      .then(data => {
        const popularPlaylistsContainer = document.getElementById('popularPlaylists');
        
        if (data.data && data.data.length > 0) {
          let html = '';
          
          data.data.forEach(playlist => {
            html += `
              <div class="col-md-4 mb-4">
                <div class="card playlist-card h-100">
                  <img src="${playlist.coverImage}" class="card-img-top playlist-cover" alt="${playlist.name}">
                  <div class="card-body">
                    <h5 class="card-title">${playlist.name}</h5>
                    <p class="card-text text-muted">By ${playlist.createdBy.username}</p>
                    <a href="/playlists/${playlist._id}" class="btn btn-playlist stretched-link">View Playlist</a>
                  </div>
                </div>
              </div>
            `;
          });
          
          popularPlaylistsContainer.innerHTML = html;
        } else {
          popularPlaylistsContainer.innerHTML = '<div class="col-12"><div class="alert alert-info">No playlists available yet.</div></div>';
        }
      })
      .catch(error => {
        console.error('Error fetching playlists:', error);
        document.getElementById('popularPlaylists').innerHTML = '<div class="col-12"><div class="alert alert-danger">Failed to load playlists.</div></div>';
      });
  });
</script>
